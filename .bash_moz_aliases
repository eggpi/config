function alias_stumbler() {
    # set power status on the emulator
    function pstatus() {
        echo -e "power status $1\n" | nc --close localhost 5554;
    }

    # set power capacity on the emulator
    function pcap() {
        echo -e "power capacity $1\n" | nc --close localhost 5554;
    }

    # set emulator to use ac power or not
    function pac() {
        echo -e "power ac $1\n" | nc --close localhost 5554;
    }

    function geo() {
        echo -e "geo fix $1 $2" | nc --close localhost 5554;
    }
}

function alias_wimf() {
    alias b='(cd ~/code/gaia; make clean && make profile)'
    alias d='(cd ~/code/gaia; make clean && DEBUG=1 DESKTOP=0 make)'

    #alias r='./mach run -profile ~/code/gaia/profile -jsconsole'
    #alias s='./mach run -profile ~/code/gaia/profile-debug -jsconsole'
    alias r='/Applications/B2G.app/Contents/MacOS/b2g-bin -profile /Users/Guiherme/code/gaia/profile/ -jsconsole'
    alias s='/Applications/B2G.app/Contents/MacOS/b2g-bin -profile /Users/Guiherme/code/gaia/profile-debug/ -jsconsole'
    alias rg='r | grep findmydevice'

    alias l="git status --porcelain -uno | grep '\.js$' | cut -d' ' -f3 | xargs jshint | tee jshint.errors"
    alias la="make lint APP=findmydevice"

    function w() {
        make webapp-zip APP=$1
    }

    alias wf="w findmydevice"
    alias wy="w system"
    alias ws="w settings"

    alias br="b && r"
    alias ds="d && s"

    alias ti="make test-integration-test APP=findmydevice"

    alias f="DEVICE_DEBUG=1 NOFTU=1 make reset-gaia"
    function i() {
        make install-gaia APP=$1
    }
}

MOZCONFIGS_DIR="$HOME/.mozconfigs"
ALL_MOZCONFIGS=$(find "$MOZCONFIGS_DIR" -type f | xargs basename)
complete -W "$ALL_MOZCONFIGS" mozconfig

function mozconfig() {
    if [ $# -eq 0 ]; then
        if [ -n "$MOZCONFIG" ]; then
            echo "$MOZCONFIG"
            PS1="\w $(basename $MOZCONFIG) \$ "
        fi
    else
        file="$MOZCONFIGS_DIR/$1"
        if [ -f "$file" ]; then
            export MOZCONFIG="$file"
            export CCACHE_DIR="$HOME/.ccache/$1"
            export CCACHE_COMPRESS=1
            ccache -M 5G
            echo "Set MOZCONFIG to $file"
            PS1="\w $1 \$ "
        else
            echo "Can't find mozconfig at $file!"
        fi
    fi
}
